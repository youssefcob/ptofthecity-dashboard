import{d as T,r as p,f as q,c as B,a as e,t as c,g as F,D as V,w as x,v as z,n as $,H as N,o as w,p as L,b as O,_ as j,e as b,F as M,h as G,i as Q}from"./index-FOCn0QZY.js";const A=g=>(L("data-v-b4b75a9a"),g=g(),O(),g),R={class:"header"},U=A(()=>e("h1",null,"Eligibility",-1)),J={class:"pagination-wrapper"},K={class:"clinic-wrapper"},W={class:"btn-search-wrapper"},X={class:"date-wrapper"},Y={class:"date"},Z=A(()=>e("label",{for:"start"},"Start date:",-1)),ee={class:"date"},te=A(()=>e("label",{for:"end"},"End date:",-1)),ne=["value"],ae=T({__name:"EligibilityHeader",props:{page:{type:Number,required:!0},lastPage:{type:Number,required:!0}},emits:["statusChanged","paginate"],setup(g,{emit:s}){const v=g,o=p(v.page),y=p("all"),h=p(null),r=p(""),a=p(`${new Date().toISOString().split("T")[0]}`),l=p(""),n=p("pending"),_=s,m=t=>{o.value==1&&t<0||o.value==v.lastPage&&t>0||(o.value=o.value+t,f())},S=t=>{n.value=t,y.value=t,o.value=1,f()},I=p([]),C=t=>{if(t==="All"){h.value=null;return}I.value.includes(t)&&(h.value=t,o.value=1,f())},D=t=>{r.value=t.target.value,o.value=1,f()},k=t=>{a.value=t.target.value,o.value=1,f()},f=()=>{let t=[];o&&t.push(`page=${o.value}`),y.value&&t.push(`status=${y.value}`),h.value&&t.push(`insurance=${h.value}`),r.value&&t.push(`start_date=${r.value}`),a.value&&t.push(`end_date=${a.value}`),l.value=t.join("&"),console.log(l.value),_("statusChanged",l.value)},E=async()=>{let t=await N.get("images/insurance");t=t.data;let i=t.reduce((u,P)=>(u.push(P.title),u),[]);I.value=i};return q(async()=>{await E()}),(t,i)=>(w(),B("div",R,[U,e("div",J,[e("button",{onClick:i[0]||(i[0]=u=>m(-1)),class:"btn"},"Prev Page"),e("div",null,[e("span",null,c(v.page),1)]),e("button",{onClick:i[1]||(i[1]=u=>m(1)),class:"btn"},"Next Page")]),e("div",K,[F(V,{list:I.value,placeHolder:"Insurances",onInput:i[2]||(i[2]=u=>C(u))},null,8,["list"])]),e("div",W,[x(e("select",{"onUpdate:modelValue":i[3]||(i[3]=u=>n.value=u),onChange:i[4]||(i[4]=u=>S(n.value))},[e("option",{class:$(["btn",{active:n.value==="all"}]),value:"all"},"All",2),e("option",{class:$(["btn",{active:n.value==="pending"}]),value:"pending"},"Pending",2),e("option",{class:$(["btn",{active:n.value==="confirmed"}]),value:"confirmed"},"Confirmed ",2),e("option",{class:$(["btn",{active:n.value==="cancelled"}]),value:"cancelled"},"Cancelled ",2)],544),[[z,n.value]])]),e("div",X,[e("div",Y,[Z,e("input",{type:"date",name:"start",onChange:i[5]||(i[5]=u=>D(u))},null,32)]),e("div",ee,[te,e("input",{type:"date",name:"end",onChange:i[6]||(i[6]=u=>k(u)),value:new Date().toISOString().split("T")[0]},null,40,ne)])])]))}}),ie=j(ae,[["__scopeId","data-v-b4b75a9a"]]),d=g=>(L("data-v-025a3e2f"),g=g(),O(),g),le={class:"card"},se={class:"info"},oe={class:"header"},re=d(()=>e("h3",null,"Personal Info:",-1)),ue={class:"btns-wrapper"},ce=d(()=>e("strong",null,"Name: ",-1)),de=d(()=>e("strong",null,"Phone: ",-1)),pe=d(()=>e("strong",null,"Email: ",-1)),ge=d(()=>e("strong",null,"Gender: ",-1)),ve=d(()=>e("strong",null,"Date Of Birth: ",-1)),_e=d(()=>e("h3",null,"Insurance Info:",-1)),be=d(()=>e("strong",null,"Insurance Company: ",-1)),he=d(()=>e("strong",null,"Insurance Card Front: ",-1)),fe=["href"],ye=d(()=>e("strong",null,"Insurance Card Back: ",-1)),me=["href"],$e=d(()=>e("strong",null,"Member ID: ",-1)),Ie=d(()=>e("strong",null,"Medicare ID: ",-1)),we=d(()=>e("strong",null,"Medicaid ID: ",-1)),Se=d(()=>e("strong",null,"Submitted at: ",-1)),Ce=T({__name:"EligibilityCard",props:{eligibility:{type:Object}},setup(g){var h;const s=g,v=p((h=s.eligibility)==null?void 0:h.status),o=async r=>{var l;if(v.value===r)return;const a=await N.put(`insurance/setStatus/${(l=s.eligibility)==null?void 0:l.id}/${r}`,{status:r},{Authorization:`Bearer ${localStorage.getItem("token")}`});a.status===401&&(window.location.href="/login"),a.status===200?v.value=r:alert(a.data.error)},y=r=>{if(!r)return"";const a=new Date(r),l=a.toLocaleDateString(),n=a.toLocaleTimeString();return`${l}  ${n}`};return(r,a)=>{var l,n,_,m,S,I,C,D,k,f,E,t,i,u,P;return w(),B("div",le,[e("div",se,[e("div",oe,[re,e("div",ue,[e("button",{class:$([{active:v.value==="pending"},"btn"]),onClick:a[0]||(a[0]=H=>o("pending"))},"Pending",2),e("button",{class:$([{active:v.value==="accepted"},"btn"]),onClick:a[1]||(a[1]=H=>o("accepted"))},"Accepted",2),e("button",{class:$(["btn",{active:v.value==="rejected"}]),onClick:a[2]||(a[2]=H=>o("rejected"))},"Rejected",2)])]),e("p",null,[ce,b(c((l=s.eligibility)==null?void 0:l.first_name)+" "+c((n=s.eligibility)==null?void 0:n.last_name),1)]),e("p",null,[de,b(c((_=s.eligibility)==null?void 0:_.phone),1)]),e("p",null,[pe,b(c((m=s.eligibility)==null?void 0:m.email),1)]),e("p",null,[ge,b(c((S=s.eligibility)==null?void 0:S.gender),1)]),e("p",null,[ve,b(c((I=s.eligibility)==null?void 0:I.dob),1)]),_e,e("p",null,[be,b(" "+c((C=s.eligibility)==null?void 0:C.insurance_provider),1)]),e("p",null,[he,b(),e("a",{href:(D=s.eligibility)==null?void 0:D.insurance_card_front,target:"_blank"},c((k=s.eligibility)==null?void 0:k.insurance_card_front),9,fe)]),e("p",null,[ye,b(),e("a",{href:(f=s.eligibility)==null?void 0:f.insurance_card_back,target:"_blank"},c((E=s.eligibility)==null?void 0:E.insurance_card_back),9,me)]),e("p",null,[$e,b(" "+c((t=r.$props.eligibility)==null?void 0:t.member_id),1)]),e("p",null,[Ie,b(" "+c((i=r.$props.eligibility)==null?void 0:i.medicare_id),1)]),e("p",null,[we,b(" "+c((u=r.$props.eligibility)==null?void 0:u.medicaid_id),1)]),e("p",null,[Se,b(" "+c(y((P=r.$props.eligibility)==null?void 0:P.created_at)),1)])])])}}}),De=j(Ce,[["__scopeId","data-v-025a3e2f"]]),ke={class:"eligibility-container"},Ee=T({__name:"Eligibility",setup(g){p("pending");const s=p(1),v=p(0),o=p([]),y=l=>{a(l)},h=async(l="")=>{const n=await N.get(`insurance/filter?${l}`,{Authorization:`Bearer ${localStorage.getItem("token")}`});if(o.value=n.data.data,v.value=n.data.last_page,console.log(n.data),n.status===401){window.location.href="/login";return}if(n.status===200)return n.data;alert(n.data.error)},a=((l,n=300)=>{let _;return function(...m){clearTimeout(_),_=setTimeout(()=>l.apply(this,m),n)}})(h,300);return q(()=>{h()}),(l,n)=>(w(),B(M,null,[F(ie,{page:s.value,lastPage:v.value,onStatusChanged:n[0]||(n[0]=_=>y(_))},null,8,["page","lastPage"]),e("div",ke,[(w(!0),B(M,null,G(o.value,_=>(w(),Q(De,{class:"eligibility",key:_.id,eligibility:_},null,8,["eligibility"]))),128))])],64))}}),Be=j(Ee,[["__scopeId","data-v-f7ec6b91"]]);export{Be as default};
