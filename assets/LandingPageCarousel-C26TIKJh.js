import{d as w,r as _,f as H,o as v,c as f,a as o,g as d,I as y,F as k,h as L,t as $,_ as h,s as B,k as D,w as C,e as b,B as x,H as M,p as T,b as S,u as P,M as F}from"./index-CGoB2Rb5.js";const z={class:"list-form-container"},q={class:"addToList-wrapper"},N={class:"list input-field"},O={class:"item"},U=["onClick"],V=w({__name:"ListInput",props:{list:{type:Array},placeHolder:String},emits:["input"],setup(s,{emit:m}){const g=s,i=_(""),l=_(g.list||[]),u=m,p=_(null),c=()=>{var t;i.value!==""&&(l.value.push(i.value),i.value="",(t=p.value)==null||t.clear(),u("input",l.value))},a=(t,e)=>{e.stopPropagation();const n=l.value.indexOf(t);n>-1&&l.value.splice(n,1),u("input",l.value)};return H(()=>{u("input",l.value)}),(t,e)=>(v(),f("div",z,[o("div",q,[d(y,{ref_key:"listInput",ref:p,placeHolder:g.placeHolder,value:i.value,onInput:e[0]||(e[0]=n=>i.value=n)},null,8,["placeHolder","value"]),o("div",{class:"btn add",onClick:e[1]||(e[1]=n=>c())},"Add")]),o("div",N,[(v(!0),f(k,null,L(l.value,n=>(v(),f("div",O,[o("span",null,$(n),1),o("div",{class:"btn delete",onClick:r=>a(n,r)},"-",8,U)]))),256))])]))}}),E=h(V,[["__scopeId","data-v-662a5ec4"]]),j={class:"addToList-wrapper"},R={class:"list input-field"},G=["onClick"],J=w({__name:"MultiFileInputField",props:{list:{type:Array},placeHolder:{type:String,default:"Add Images"}},emits:["input"],setup(s,{emit:m}){const g=s;_("");const i=new FormData,l=_([]),u=_(null),p=m;_(null);const c=t=>{var n;t.forEach((r,I)=>{i.append(I,r),l.value.push(I)}),(n=u.value)==null||n.clear();let e=new FormData;i.forEach((r,I)=>{e.append("images[]",r)}),p("input",e)},a=(t,e)=>{e.stopPropagation(),i.delete(t),l.value=l.value.filter(n=>n!==t),i.forEach((n,r)=>{console.log(r,n)}),p("input",i)};return H(()=>{p("input",i)}),(t,e)=>(v(),f("div",j,[d(B,{placeHolder:g.placeHolder,onInput:e[0]||(e[0]=n=>c(n)),ref_key:"fileInputField",ref:u},null,8,["placeHolder"]),o("div",R,[(v(!0),f(k,null,L(l.value,(n,r)=>(v(),f("div",{class:"item",key:r},[o("div",{class:"btn delete",onClick:I=>a(n,I)},"-",8,G),o("span",null,$(n),1)]))),128))])]))}}),K=h(J,[["__scopeId","data-v-f4bb38db"]]),Q=s=>(T("data-v-27cd39a0"),s=s(),S(),s),W={class:"form-wrapper"},X={class:"left"},Y={class:"btn-wrapper"},Z={class:"right"},tt=Q(()=>o("div",{class:"ps"},"landscape aspect ratio 2:3 / 3:4 ",-1)),et=w({__name:"AddCampaignModal",emits:["close","submit"],setup(s,{emit:m}){const g=m,i=_(!1),l=D({title:"",slogans:[],images:new FormData,animation_interval:"",buttonLink:"",buttonText:""}),u=async()=>{let a=p();try{i.value=!0;const t=await M.post("content/campaign",a,{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"multipart/form-data"});if(console.log(t.data),i.value=!1,t.status!=200){t.status===422&&alert(t.data.message),t.status===401&&(alert("Unauthorized"),window.location.href="/login");return}g("submit",t.data)}catch(t){i.value=!1,console.log(t)}},p=()=>{let a=new FormData;return l.slogans.forEach(t=>{a.append("slogans[]",t)}),l.images.forEach((t,e)=>{a.append("images[]",t)}),a.append("title",l.title),a.append("animation_interval",l.animation_interval),a.append("buttonLink",l.buttonLink),a.append("buttonText",l.buttonText),a},c=a=>{l.images=a};return(a,t)=>(v(),f("div",W,[o("div",X,[d(y,{placeHolder:"Add Title",onInput:t[0]||(t[0]=e=>l.title=e)}),d(y,{placeHolder:"Interval In ms",onInput:t[1]||(t[1]=e=>l.animation_interval=e)}),d(y,{placeHolder:"Button Link",onInput:t[2]||(t[2]=e=>l.buttonLink=e)}),d(y,{placeHolder:"Button text",onInput:t[3]||(t[3]=e=>l.buttonText=e)}),o("div",Y,[d(x,{class:"btn add",onClick:t[4]||(t[4]=e=>u()),loading:i.value},{default:C(()=>[b("submit")]),_:1},8,["loading"]),o("div",{class:"btn cancel",onClick:t[5]||(t[5]=e=>g("close"))},"Cancel")])]),o("div",Z,[o("div",null,[d(K,{onInput:t[6]||(t[6]=e=>c(e))}),tt]),d(E,{placeHolder:"Add Slogans",onInput:t[7]||(t[7]=e=>l.slogans=e)})])]))}}),at=h(et,[["__scopeId","data-v-27cd39a0"]]),nt={class:"form-wrapper"},lt={class:"right"},ot={class:"left"},st={class:"btn-wrapper"},it=w({__name:"EditCampaign",props:{campaign:{type:Object,required:!0}},emits:["close","submit"],setup(s,{emit:m}){const g=m,i=_(!1),l=s,u={title:l.campaign.title,slogans:l.campaign.slogans,animation_interval:l.campaign.animation_interval,buttonLink:l.campaign.buttonLink,buttonText:l.campaign.buttonText},p=async()=>{try{console.log(u),i.value=!0;const c=await M.patch(`content/campaign/${l.campaign.id}`,u,{Authorization:`Bearer ${localStorage.getItem("token")}`});if(console.log(c.data),i.value=!1,c.status!=200){c.status===422&&alert(c.data.message),c.status===401&&(alert("Unauthorized"),window.location.href="/login"),console.log(c);return}window.location.reload()}catch(c){i.value=!1,console.log(c)}};return(c,a)=>(v(),f("div",nt,[o("div",lt,[d(E,{placeHolder:"Add Slogans",onInput:a[0]||(a[0]=t=>u.slogans=t),list:s.campaign.slogans},null,8,["list"])]),o("div",ot,[d(y,{placeHolder:"Add Title",onInput:a[1]||(a[1]=t=>u.title=t),value:s.campaign.title},null,8,["value"]),d(y,{placeHolder:"Interval In ms",onInput:a[2]||(a[2]=t=>u.animation_interval=t),value:s.campaign.animation_interval},null,8,["value"]),d(y,{placeHolder:"Button Link",onInput:a[3]||(a[3]=t=>u.buttonLink=t),value:s.campaign.buttonLink},null,8,["value"]),d(y,{placeHolder:"Button text",onInput:a[4]||(a[4]=t=>u.buttonText=t),value:s.campaign.buttonText},null,8,["value"]),o("div",st,[d(x,{class:"btn add",onClick:a[5]||(a[5]=t=>p()),loading:i.value},{default:C(()=>[b("submit")]),_:1},8,["loading"]),o("div",{class:"btn cancel",onClick:a[6]||(a[6]=t=>g("close"))},"Cancel")])])]))}}),dt=h(it,[["__scopeId","data-v-c2f91630"]]),ut={class:"form-wrapper"},rt=w({__name:"EditCampaignImageModal",emits:["update","cancel"],setup(s,{expose:m,emit:g}){const i=_(0),l=g,u=_(!1);let p=new FormData;const c=async()=>{try{if(!i)return;u.value=!0;let t=new FormData;p.forEach((n,r)=>{t.append("image",n)}),console.log(t);const e=await M.post(`content/campaign/image/${i.value}`,t,{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"multipart/form-data"});u.value=!1,l("cancel"),e.status===201||e.status===200?l("update",e.data):console.log(e),u.value=!1}catch(t){console.error(t),u.value=!1}};return m({assignId:t=>{i.value=t}}),(t,e)=>(v(),f("div",ut,[b($(i.value)+" ",1),d(B,{placeHolder:"Image",onInput:e[0]||(e[0]=n=>P(p)?p.value=n:p=n)}),d(x,{class:"submit",onClick:c,loading:u.value},{default:C(()=>[b("Submit")]),_:1},8,["loading"])]))}}),ct=h(rt,[["__scopeId","data-v-94a7e974"]]),A=s=>(T("data-v-ba22f6ab"),s=s(),S(),s),pt={class:"card-header"},mt={class:"btn-wrapper"},gt={class:"slogans"},vt=A(()=>o("h3",null,"Slogans: ",-1)),ft=A(()=>o("h3",null,"Images: ",-1)),_t={class:"images"},It=["href"],bt=A(()=>o("br",null,null,-1)),$t=w({__name:"CampaignCard",props:{campaign:{type:Object,required:!0},loading:{type:Boolean,required:!0}},emits:["delete"],setup(s,{emit:m}){const g=m,i=e=>{g("delete",e)},l=_(null),u=()=>{var e;(e=l.value)==null||e.openModal()},p=_(null),c=_(null),a=e=>{var n,r;(n=c.value)==null||n.assignId(e),(r=p.value)==null||r.openModal()},t=()=>{location.reload()};return(e,n)=>(v(),f(k,null,[d(F,{ref_key:"editCampaignModal",ref:l},{default:C(()=>[d(dt,{campaign:s.campaign,onCancel:n[0]||(n[0]=r=>{var I;return(I=l.value)==null?void 0:I.closeModal()})},null,8,["campaign"])]),_:1},512),d(F,{ref_key:"editImageModal",ref:p},{default:C(()=>[d(ct,{ref_key:"editImageForm",ref:c,onCancel:n[1]||(n[1]=r=>{var I;return(I=p.value)==null?void 0:I.closeModal()}),onUpdate:n[2]||(n[2]=r=>t())},null,512)]),_:1},512),o("div",pt,[o("h2",null,"Title: "+$(s.campaign.title),1),o("div",mt,[d(x,{class:"delete",onClick:n[3]||(n[3]=r=>i(s.campaign.id)),loading:s.loading},{default:C(()=>[b("Delete")]),_:1},8,["loading"]),d(x,{onClick:n[4]||(n[4]=r=>u())},{default:C(()=>[b("Edit")]),_:1})])]),o("div",gt,[vt,o("span",null,[b(" ["),(v(!0),f(k,null,L(s.campaign.slogans,(r,I)=>(v(),f(k,{key:I},[b($(r)+", ",1)],64))),128)),b("]")])]),o("h3",null,"Animation: "+$(s.campaign.animation),1),o("h3",null,"Interval: "+$(s.campaign.animation_interval),1),o("h3",null,"Button Link: "+$(s.campaign.buttonLink),1),o("h3",null,"Button Text: "+$(s.campaign.buttonText),1),ft,o("div",_t,[(v(!0),f(k,null,L(s.campaign.images,(r,I)=>(v(),f(k,{key:I},[o("a",{href:r.path},[b("Image "+$(I),1),bt],8,It),d(x,{class:"edit",onClick:Mt=>a(r.id)},{default:C(()=>[b("Edit")]),_:2},1032,["onClick"])],64))),128))])],64))}}),kt=h($t,[["__scopeId","data-v-ba22f6ab"]]),Ct=s=>(T("data-v-94ccefca"),s=s(),S(),s),yt={class:"landing-page"},wt={class:"header"},ht=Ct(()=>o("h2",null,"Landing Page",-1)),xt={class:"btn-wrapper"},Lt=w({__name:"LandingPageCarousel",setup(s){const m=_([]),g=_(null),i=_(!1),l=a=>{var e;console.log(a);let t=m.value;t.push(...a),m.value=t,(e=g.value)==null||e.closeModal()},u=async()=>{try{const a=await M.get("content/campaign",{Authorization:`Bearer ${localStorage.getItem("token")}`});console.log(a.data),m.value=a.data}catch(a){console.log(a)}},p=async a=>{i.value=!0;try{const t=await M.delete(`content/campaign/${a}`,{Authorization:`Bearer ${localStorage.getItem("token")}`});if(console.log(t.data),i.value=!1,t.status!=200){console.log(t);return}m.value=m.value.filter(e=>e.id!==a)}catch(t){i.value=!1,console.log(t)}},c=()=>{var a;(a=g.value)==null||a.openModal()};return H(()=>{u()}),(a,t)=>(v(),f(k,null,[d(F,{ref_key:"campaignModal",ref:g},{default:C(()=>[d(at,{onClose:t[0]||(t[0]=e=>{var n;return(n=g.value)==null?void 0:n.closeModal()}),onSubmit:t[1]||(t[1]=e=>l(e))})]),_:1},512),o("div",yt,[o("div",wt,[ht,o("div",xt,[o("button",{class:"btn add",onClick:t[2]||(t[2]=e=>c())},"Add Image")])]),(v(!0),f(k,null,L(m.value,(e,n)=>(v(),f("div",{class:"card",key:n},[d(kt,{campaign:e,onDelete:t[3]||(t[3]=r=>p(r)),loading:i.value},null,8,["campaign","loading"])]))),128))])],64))}}),Ht=h(Lt,[["__scopeId","data-v-94ccefca"]]);export{Ht as default};
