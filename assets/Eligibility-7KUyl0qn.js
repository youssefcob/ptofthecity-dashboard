import{d as T,r as g,f as q,c as P,a as e,t as p,g as H,D as z,w as F,v as V,n as I,H as A,o as S,p as M,b as N,_ as x,e as y,F as O,h as R,i as U}from"./index-BDErt0xQ.js";const j=b=>(M("data-v-0e139ed0"),b=b(),N(),b),G={class:"header"},Q=j(()=>e("h1",null,"Eligibility",-1)),J={class:"pagination-wrapper"},K={class:"clinic-wrapper"},W={class:"btn-search-wrapper"},X={class:"date-wrapper"},Y={class:"date"},Z=j(()=>e("label",{for:"start"},"Start date:",-1)),ee={class:"date"},te=j(()=>e("label",{for:"end"},"End date:",-1)),ae=["value"],ne=T({__name:"EligibilityHeader",props:{page:{type:Number,required:!0},lastPage:{type:Number,required:!0},downloading:{type:Boolean,required:!0}},emits:["statusChanged","paginate","exportCsv"],setup(b,{emit:o}){const h=b,r=g(h.page),w=g("all"),m=g(null),n=g(""),s=g(`${new Date().toISOString().split("T")[0]}`),f=g(""),d=g("all"),i=o,a=t=>{r.value==1&&t<0||r.value==h.lastPage&&t>0||(r.value=r.value+t,i("statusChanged",$()))},u=t=>{d.value=t,w.value=t,r.value=1,i("statusChanged",$())},_=g([]),C=t=>{if(t==="All"){m.value=null;return}_.value.includes(t)&&(m.value=t,r.value=1,i("statusChanged",$()))},D=t=>{n.value=t.target.value,r.value=1,i("statusChanged",$())},k=t=>{s.value=t.target.value,r.value=1,i("statusChanged",$())},$=()=>{let t=[];r&&t.push(`page=${r.value}`),w.value&&t.push(`status=${w.value}`),m.value&&t.push(`insurance=${m.value}`),n.value&&t.push(`start_date=${n.value}`),s.value&&t.push(`end_date=${s.value}`),f.value=t.join("&"),console.log(f.value),i("statusChanged",f.value)},E=async()=>{let t=await A.get("images/insurance");t=t.data;let l=t.reduce((c,B)=>(c.push(B.title),c),[]);_.value=l};return q(async()=>{await E()}),(t,l)=>(S(),P("div",G,[Q,e("div",J,[e("button",{onClick:l[0]||(l[0]=c=>a(-1)),class:"btn"},"<"),e("div",null,[e("span",null,p(h.page),1)]),e("button",{onClick:l[1]||(l[1]=c=>a(1)),class:"btn"},">")]),e("div",K,[H(z,{list:_.value,placeHolder:"Insurances",onInput:l[2]||(l[2]=c=>C(c))},null,8,["list"])]),e("div",W,[F(e("select",{"onUpdate:modelValue":l[3]||(l[3]=c=>d.value=c),onChange:l[4]||(l[4]=c=>u(d.value))},[e("option",{class:I(["btn",{active:d.value==="all"}]),value:"all"},"All",2),e("option",{class:I(["btn",{active:d.value==="pending"}]),value:"pending"},"Pending",2),e("option",{class:I(["btn",{active:d.value==="confirmed"}]),value:"confirmed"},"Confirmed ",2),e("option",{class:I(["btn",{active:d.value==="cancelled"}]),value:"cancelled"},"Cancelled ",2)],544),[[V,d.value]])]),e("div",X,[e("div",Y,[Z,e("input",{type:"date",name:"start",onChange:l[5]||(l[5]=c=>D(c))},null,32)]),e("div",ee,[te,e("input",{type:"date",name:"end",onChange:l[6]||(l[6]=c=>k(c)),value:new Date().toISOString().split("T")[0]},null,40,ae)])])]))}}),se=x(ne,[["__scopeId","data-v-0e139ed0"]]),v=b=>(M("data-v-025a3e2f"),b=b(),N(),b),le={class:"card"},ie={class:"info"},oe={class:"header"},re=v(()=>e("h3",null,"Personal Info:",-1)),ue={class:"btns-wrapper"},ce=v(()=>e("strong",null,"Name: ",-1)),de=v(()=>e("strong",null,"Phone: ",-1)),pe=v(()=>e("strong",null,"Email: ",-1)),ge=v(()=>e("strong",null,"Gender: ",-1)),ve=v(()=>e("strong",null,"Date Of Birth: ",-1)),_e=v(()=>e("h3",null,"Insurance Info:",-1)),be=v(()=>e("strong",null,"Insurance Company: ",-1)),he=v(()=>e("strong",null,"Insurance Card Front: ",-1)),fe=["href"],ye=v(()=>e("strong",null,"Insurance Card Back: ",-1)),me=["href"],$e=v(()=>e("strong",null,"Member ID: ",-1)),we=v(()=>e("strong",null,"Medicare ID: ",-1)),Ie=v(()=>e("strong",null,"Medicaid ID: ",-1)),Ce=v(()=>e("strong",null,"Submitted at: ",-1)),Se=T({__name:"EligibilityCard",props:{eligibility:{type:Object}},setup(b){var m;const o=b,h=g((m=o.eligibility)==null?void 0:m.status),r=async n=>{var f;if(h.value===n)return;const s=await A.put(`insurance/setStatus/${(f=o.eligibility)==null?void 0:f.id}/${n}`,{status:n},{Authorization:`Bearer ${localStorage.getItem("token")}`});s.status===401&&(window.location.href="/login"),s.status===200?h.value=n:alert(s.data.error)},w=n=>{if(!n)return"";const s=new Date(n),f=s.toLocaleDateString(),d=s.toLocaleTimeString();return`${f}  ${d}`};return(n,s)=>{var f,d,i,a,u,_,C,D,k,$,E,t,l,c,B;return S(),P("div",le,[e("div",ie,[e("div",oe,[re,e("div",ue,[e("button",{class:I([{active:h.value==="pending"},"btn"]),onClick:s[0]||(s[0]=L=>r("pending"))},"Pending",2),e("button",{class:I([{active:h.value==="accepted"},"btn"]),onClick:s[1]||(s[1]=L=>r("accepted"))},"Accepted",2),e("button",{class:I(["btn",{active:h.value==="rejected"}]),onClick:s[2]||(s[2]=L=>r("rejected"))},"Rejected",2)])]),e("p",null,[ce,y(p((f=o.eligibility)==null?void 0:f.first_name)+" "+p((d=o.eligibility)==null?void 0:d.last_name),1)]),e("p",null,[de,y(p((i=o.eligibility)==null?void 0:i.phone),1)]),e("p",null,[pe,y(p((a=o.eligibility)==null?void 0:a.email),1)]),e("p",null,[ge,y(p((u=o.eligibility)==null?void 0:u.gender),1)]),e("p",null,[ve,y(p((_=o.eligibility)==null?void 0:_.dob),1)]),_e,e("p",null,[be,y(" "+p((C=o.eligibility)==null?void 0:C.insurance_provider),1)]),e("p",null,[he,y(),e("a",{href:(D=o.eligibility)==null?void 0:D.insurance_card_front,target:"_blank"},p((k=o.eligibility)==null?void 0:k.insurance_card_front),9,fe)]),e("p",null,[ye,y(),e("a",{href:($=o.eligibility)==null?void 0:$.insurance_card_back,target:"_blank"},p((E=o.eligibility)==null?void 0:E.insurance_card_back),9,me)]),e("p",null,[$e,y(" "+p((t=n.$props.eligibility)==null?void 0:t.member_id),1)]),e("p",null,[we,y(" "+p((l=n.$props.eligibility)==null?void 0:l.medicare_id),1)]),e("p",null,[Ie,y(" "+p((c=n.$props.eligibility)==null?void 0:c.medicaid_id),1)]),e("p",null,[Ce,y(" "+p(w((B=n.$props.eligibility)==null?void 0:B.created_at)),1)])])])}}}),De=x(Se,[["__scopeId","data-v-025a3e2f"]]),ke={class:"eligibility-container"},Ee=T({__name:"Eligibility",setup(b){g("pending");const o=g(1),h=g(0),r=g([]),w=i=>{d(i)},m=async(i="")=>{const a=await A.get(`insurance/filter?${i}`,{Authorization:`Bearer ${localStorage.getItem("token")}`});if(r.value=a.data.data,h.value=a.data.last_page,console.log(a.data),a.status===401){window.location.href="/login";return}if(a.status===200)return a.data;alert(a.data.error)},n=g(!1),s=async(i="")=>{try{n.value=!0;const a=await A.get(`insurance/filter/export?${i}`,{Authorization:`Bearer ${localStorage.getItem("token")}`});if(n.value=!1,a.status===200){const u=window.URL.createObjectURL(new Blob([a.data])),_=document.createElement("a");_.href=u;const C=new Date().toISOString().split("T")[0];_.setAttribute("download",`insurances_${C}.csv`),document.body.appendChild(_),_.click()}else alert(a.data.error)}catch(a){n.value=!1,console.error(a),alert("An error occured while exporting reservations")}},d=((i,a=300)=>{let u;return function(..._){clearTimeout(u),u=setTimeout(()=>i.apply(this,_),a)}})(m,300);return q(()=>{m()}),(i,a)=>(S(),P(O,null,[H(se,{downloading:n.value,page:o.value,lastPage:h.value,onStatusChanged:a[0]||(a[0]=u=>w(u)),onExportCsv:a[1]||(a[1]=u=>s(u))},null,8,["downloading","page","lastPage"]),e("div",ke,[(S(!0),P(O,null,R(r.value,u=>(S(),U(De,{class:"eligibility",key:u.id,eligibility:u},null,8,["eligibility"]))),128))])],64))}}),Pe=x(Ee,[["__scopeId","data-v-2a9aba9b"]]);export{Pe as default};
