import{d as T,r as g,f as H,c as P,g as A,w as z,B as F,a as e,t as p,D as R,j as V,v as U,n as C,H as j,o as S,e as h,p as M,b as N,_ as L,F as q,h as G,i as Q}from"./index-Bv1WkENJ.js";const O=_=>(M("data-v-cd2e326e"),_=_(),N(),_),J={class:"header"},K=O(()=>e("h1",null,"Eligibility",-1)),W={class:"pagination-wrapper"},X={class:"clinic-wrapper"},Y={class:"btn-search-wrapper"},Z={class:"date-wrapper"},ee={class:"date"},te=O(()=>e("label",{for:"start"},"Start date:",-1)),ae={class:"date"},ne=O(()=>e("label",{for:"end"},"End date:",-1)),se=["value"],le=T({__name:"EligibilityHeader",props:{page:{type:Number,required:!0},lastPage:{type:Number,required:!0},downloading:{type:Boolean,required:!0}},emits:["statusChanged","paginate","exportCsv"],setup(_,{emit:i}){const f=_,r=g(f.page),w=g("all"),m=g(null),n=g(""),l=g(`${new Date().toISOString().split("T")[0]}`),y=g(""),d=g("all"),o=i,a=t=>{r.value==1&&t<0||r.value==f.lastPage&&t>0||(r.value=r.value+t,o("statusChanged",$()))},c=t=>{d.value=t,w.value=t,r.value=1,o("statusChanged",$())},b=g([]),I=t=>{if(t==="All"){m.value=null;return}b.value.includes(t)&&(m.value=t,r.value=1,o("statusChanged",$()))},D=t=>{n.value=t.target.value,r.value=1,o("statusChanged",$())},k=t=>{l.value=t.target.value,r.value=1,o("statusChanged",$())},E=()=>{o("exportCsv",$())},$=()=>{let t=[];return r&&t.push(`page=${r.value}`),w.value&&t.push(`status=${w.value}`),m.value&&t.push(`insurance=${m.value}`),n.value&&t.push(`start_date=${n.value}`),l.value&&t.push(`end_date=${l.value}`),y.value=t.join("&"),console.log(y.value),y.value},B=async()=>{let t=await j.get("images/insurance");t=t.data;let s=t.reduce((u,x)=>(u.push(x.title),u),[]);b.value=s};return H(async()=>{await B()}),(t,s)=>(S(),P("div",J,[K,A(F,{loading:_.downloading,class:"btn export",onClick:s[0]||(s[0]=u=>E())},{default:z(()=>[h("+ Export")]),_:1},8,["loading"]),e("div",W,[e("button",{onClick:s[1]||(s[1]=u=>a(-1)),class:"btn"},"<"),e("div",null,[e("span",null,p(f.page),1)]),e("button",{onClick:s[2]||(s[2]=u=>a(1)),class:"btn"},">")]),e("div",X,[A(R,{list:b.value,placeHolder:"Insurances",onInput:s[3]||(s[3]=u=>I(u))},null,8,["list"])]),e("div",Y,[V(e("select",{"onUpdate:modelValue":s[4]||(s[4]=u=>d.value=u),onChange:s[5]||(s[5]=u=>c(d.value))},[e("option",{class:C(["btn",{active:d.value==="all"}]),value:"all"},"All",2),e("option",{class:C(["btn",{active:d.value==="pending"}]),value:"pending"},"Pending",2),e("option",{class:C(["btn",{active:d.value==="accepted"}]),value:"accepted"},"Accepted ",2),e("option",{class:C(["btn",{active:d.value==="rejected"}]),value:"rejected"},"Rejected ",2)],544),[[U,d.value]])]),e("div",Z,[e("div",ee,[te,e("input",{type:"date",name:"start",onChange:s[6]||(s[6]=u=>D(u))},null,32)]),e("div",ae,[ne,e("input",{type:"date",name:"end",onChange:s[7]||(s[7]=u=>k(u)),value:new Date().toISOString().split("T")[0]},null,40,se)])])]))}}),ie=L(le,[["__scopeId","data-v-cd2e326e"]]),v=_=>(M("data-v-025a3e2f"),_=_(),N(),_),oe={class:"card"},re={class:"info"},ue={class:"header"},ce=v(()=>e("h3",null,"Personal Info:",-1)),de={class:"btns-wrapper"},pe=v(()=>e("strong",null,"Name: ",-1)),ge=v(()=>e("strong",null,"Phone: ",-1)),ve=v(()=>e("strong",null,"Email: ",-1)),_e=v(()=>e("strong",null,"Gender: ",-1)),be=v(()=>e("strong",null,"Date Of Birth: ",-1)),he=v(()=>e("h3",null,"Insurance Info:",-1)),fe=v(()=>e("strong",null,"Insurance Company: ",-1)),ye=v(()=>e("strong",null,"Insurance Card Front: ",-1)),me=["href"],$e=v(()=>e("strong",null,"Insurance Card Back: ",-1)),we=["href"],Ce=v(()=>e("strong",null,"Member ID: ",-1)),Ie=v(()=>e("strong",null,"Medicare ID: ",-1)),Se=v(()=>e("strong",null,"Medicaid ID: ",-1)),De=v(()=>e("strong",null,"Submitted at: ",-1)),ke=T({__name:"EligibilityCard",props:{eligibility:{type:Object}},setup(_){var m;const i=_,f=g((m=i.eligibility)==null?void 0:m.status),r=async n=>{var y;if(f.value===n)return;const l=await j.put(`insurance/setStatus/${(y=i.eligibility)==null?void 0:y.id}/${n}`,{status:n},{Authorization:`Bearer ${localStorage.getItem("token")}`});l.status===401&&(window.location.href="/login"),l.status===200?f.value=n:alert(l.data.error)},w=n=>{if(!n)return"";const l=new Date(n),y=l.toLocaleDateString(),d=l.toLocaleTimeString();return`${y}  ${d}`};return(n,l)=>{var y,d,o,a,c,b,I,D,k,E,$,B,t,s,u;return S(),P("div",oe,[e("div",re,[e("div",ue,[ce,e("div",de,[e("button",{class:C([{active:f.value==="pending"},"btn"]),onClick:l[0]||(l[0]=x=>r("pending"))},"Pending",2),e("button",{class:C([{active:f.value==="accepted"},"btn"]),onClick:l[1]||(l[1]=x=>r("accepted"))},"Accepted",2),e("button",{class:C(["btn",{active:f.value==="rejected"}]),onClick:l[2]||(l[2]=x=>r("rejected"))},"Rejected",2)])]),e("p",null,[pe,h(p((y=i.eligibility)==null?void 0:y.first_name)+" "+p((d=i.eligibility)==null?void 0:d.last_name),1)]),e("p",null,[ge,h(p((o=i.eligibility)==null?void 0:o.phone),1)]),e("p",null,[ve,h(p((a=i.eligibility)==null?void 0:a.email),1)]),e("p",null,[_e,h(p((c=i.eligibility)==null?void 0:c.gender),1)]),e("p",null,[be,h(p((b=i.eligibility)==null?void 0:b.dob),1)]),he,e("p",null,[fe,h(" "+p((I=i.eligibility)==null?void 0:I.insurance_provider),1)]),e("p",null,[ye,h(),e("a",{href:(D=i.eligibility)==null?void 0:D.insurance_card_front,target:"_blank"},p((k=i.eligibility)==null?void 0:k.insurance_card_front),9,me)]),e("p",null,[$e,h(),e("a",{href:(E=i.eligibility)==null?void 0:E.insurance_card_back,target:"_blank"},p(($=i.eligibility)==null?void 0:$.insurance_card_back),9,we)]),e("p",null,[Ce,h(" "+p((B=n.$props.eligibility)==null?void 0:B.member_id),1)]),e("p",null,[Ie,h(" "+p((t=n.$props.eligibility)==null?void 0:t.medicare_id),1)]),e("p",null,[Se,h(" "+p((s=n.$props.eligibility)==null?void 0:s.medicaid_id),1)]),e("p",null,[De,h(" "+p(w((u=n.$props.eligibility)==null?void 0:u.created_at)),1)])])])}}}),Ee=L(ke,[["__scopeId","data-v-025a3e2f"]]),Be={class:"eligibility-container"},xe=T({__name:"Eligibility",setup(_){g("pending");const i=g(1),f=g(0),r=g([]),w=o=>{d(o)},m=async(o="")=>{const a=await j.get(`insurance/filter?${o}`,{Authorization:`Bearer ${localStorage.getItem("token")}`});if(r.value=a.data.data,f.value=a.data.last_page,i.value=a.data.current_page,console.log(a.data),a.status===401){window.location.href="/login";return}if(a.status===200)return a.data;alert(a.data.error)},n=g(!1),l=async(o="")=>{try{n.value=!0;const a=await j.get(`insurance/filter/export?${o}`,{Authorization:`Bearer ${localStorage.getItem("token")}`});if(n.value=!1,a.status===200){const c=window.URL.createObjectURL(new Blob([a.data])),b=document.createElement("a");b.href=c;const I=new Date().toISOString().split("T")[0];b.setAttribute("download",`insurances_${I}.csv`),document.body.appendChild(b),b.click()}else alert(a.data.error)}catch(a){n.value=!1,console.error(a),alert("An error occured while exporting reservations")}},d=((o,a=300)=>{let c;return function(...b){clearTimeout(c),c=setTimeout(()=>o.apply(this,b),a)}})(m,300);return H(()=>{m()}),(o,a)=>(S(),P(q,null,[A(ie,{downloading:n.value,page:i.value,lastPage:f.value,onStatusChanged:a[0]||(a[0]=c=>w(c)),onExportCsv:a[1]||(a[1]=c=>l(c))},null,8,["downloading","page","lastPage"]),e("div",Be,[(S(!0),P(q,null,G(r.value,c=>(S(),Q(Ee,{class:"eligibility",key:c.id,eligibility:c},null,8,["eligibility"]))),128))])],64))}}),je=L(xe,[["__scopeId","data-v-0b06988f"]]);export{je as default};
