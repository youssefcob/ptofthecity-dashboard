import{d as v,o as d,c as u,a as i,t as h,g as p,w as I,e as k,B as y,_ as F,r as c,u as C,s as $,H as A,f as B,M as x,F as M,h as N,i as b}from"./index-DnWVMjeJ.js";const V={class:"wrapper"},D={class:"header"},H={class:"body"},S=["src"],U=v({__name:"ImgComponent",props:{image:{}},emits:["openModal"],setup(w,{emit:l}){const m=l;return(a,s)=>(d(),u("div",V,[i("div",D,[i("h2",null,h(a.image.title.charAt(0).toUpperCase()+a.image.title.slice(1))+" Image",1),p(y,{class:"Add",onClick:s[0]||(s[0]=r=>m("openModal",a.image.title))},{default:I(()=>[k("Add Image")]),_:1})]),i("div",H,[i("img",{src:a.image.path},null,8,S)])]))}}),z=F(U,[["__scopeId","data-v-cfb8bf84"]]),E={class:"wrapper"},L={key:0,class:"ps"},O=v({__name:"ImgFormModal",props:{images:Array},emits:["newImage"],setup(w,{expose:l,emit:m}){const a=c(""),s=c(!1);let r=new FormData;const _=m,n=e=>{let o=new FormData;r=e;for(let[g,f]of r.entries())if(console.log(g,f),f){o.set("image",f);break}o.set("title",a.value),r=o},t=async()=>{s.value=!0;const e=await A.post("content/images",r,{Authorization:`Bearer ${localStorage.getItem("token")}`});s.value=!1,e.status===200||e.status===201?(console.log(e.data),_("newImage",e.data)):(console.log(e),alert(e))};return l({type:a}),(e,o)=>(d(),u("div",E,[i("h1",null,h(a.value.charAt(0).toUpperCase()+a.value.slice(1)),1),i("div",null,[p(C,{placeHolder:"Image",onInput:o[0]||(o[0]=g=>n(g))}),a.value=="career"?(d(),u("div",L," landscape aspect ratio of 2:3 / 3:4")):$("",!0)]),p(y,{class:"Add",loading:s.value,onClick:o[1]||(o[1]=g=>t())},{default:I(()=>[k("Add Image")]),_:1},8,["loading"])]))}}),T=F(O,[["__scopeId","data-v-dc11900a"]]),j={class:"sections-wrapper"},G=v({__name:"Images",setup(w){const l=c([]),m=async()=>{const n=await A.get("content/images");l.value=n.data},a=c(null),s=c(null),r=n=>{var t;s.value&&(s.value.type=n),(t=a.value)==null||t.openModal()},_=n=>{const t=l.value.findIndex(e=>e.title===n.title);t!==-1&&(l.value[t]=n)};return B(()=>{m()}),(n,t)=>(d(),u(M,null,[p(x,{ref_key:"modal",ref:a},{default:I(()=>[p(T,{ref_key:"imgFormModal",ref:s,onNewImage:t[0]||(t[0]=e=>_(e))},null,512)]),_:1},512),i("div",j,[(d(!0),u(M,null,N(l.value,e=>(d(),b(z,{image:e,onOpenModal:t[1]||(t[1]=o=>r(o))},null,8,["image"]))),256))])],64))}});export{G as default};
