import{_ as b,k as F,o as u,c as m,a as n,g as r,w as f,e as p,p as y,b as B,d as x,r as _,t as C,I as H,B as M,H as A,f as N,M as z,F as w,h as S}from"./index-BdUxX3h6.js";const V={},D=t=>(y("data-v-d5b661f6"),t=t(),B(),t),T={class:"header"},U=D(()=>n("h1",null,"Admins",-1)),q={class:"btn-search-wrapper"};function L(t,g){const l=F("router-link");return u(),m("div",T,[U,n("div",q,[r(l,{to:"/dashboard/admins",class:"add"},{default:f(()=>[p("Admins")]),_:1})])])}const j=b(V,[["render",L],["__scopeId","data-v-d5b661f6"]]),G=t=>(y("data-v-6ca6b2ef"),t=t(),B(),t),J={class:"Form-container"},K=G(()=>n("br",null,null,-1)),O=x({__name:"AddEmailModal",props:{form:{type:String,required:!0}},emits:["newEmail"],setup(t,{emit:g}){const l=t,E=g,c=_(!1),v=_(""),k=async()=>{c.value=!0;let s=await A.post("admin/email",{email:v.value,title:l.form},{Authorization:`Bearer ${localStorage.getItem("token")}`});c.value=!1,console.log(s),s.status===200?(console.log(s.data),E("newEmail",s.data)):(console.log(s),alert(s))},$=s=>{v.value=s,console.log(v.value)};return(s,i)=>(u(),m("div",J,[n("h1",null,[p("Add Email To "),K,p(" "+C(t.form.charAt(0).toUpperCase()+t.form.slice(1))+" Form",1)]),r(H,{type:"email",placeHolder:"Email",onInput:i[0]||(i[0]=h=>$(h))}),r(M,{class:"add",loading:c.value,onClick:i[1]||(i[1]=h=>k())},{default:f(()=>[p("Submit")]),_:1},8,["loading"])]))}}),P=b(O,[["__scopeId","data-v-6ca6b2ef"]]),Q={class:"emails-container"},R={class:"header"},W={class:"emails"},X={class:"singleEmail"},Y=x({__name:"Emails",setup(t){const g=["reservation","insurance","career","contact"],l=_({}),E=async()=>{const a=(await A.get("admin/email",{Authorization:`Bearer ${localStorage.getItem("token")}`})).data.reduce((e,d)=>(e[d.title]||(e[d.title]=[]),e[d.title].push(d),e),{});l.value=a,console.log(l.value)},c=_(!1),v=async(o,a)=>{c.value=!0;const e=await A.delete(`admin/email/${o}`,{Authorization:`Bearer ${localStorage.getItem("token")}`});c.value=!1,e.status===200&&(l.value[a]=k(o,a))},k=(o,a)=>l.value[a].filter(e=>e.id!=o),$=o=>{var a;l.value[o.title].push(o),console.log(l.value),(a=i.value)==null||a.closeModal()},s=_(""),i=_(null),h=o=>{var a;s.value=o,(a=i.value)==null||a.openModal()};return N(()=>{E()}),(o,a)=>(u(),m(w,null,[r(j),r(z,{ref_key:"addEmailModal",ref:i},{default:f(()=>{var e;return[r(P,{form:s.value,onClose:(e=i.value)==null?void 0:e.closeModal,onNewEmail:a[0]||(a[0]=d=>$(d))},null,8,["form","onClose"])]}),_:1},512),n("div",Q,[(u(),m(w,null,S(g,(e,d)=>n("div",{class:"emails-wrapper",key:d},[n("div",R,[n("h2",null,C(e.charAt(0).toUpperCase()+e.slice(1))+" Form",1),r(M,{class:"add",onClick:I=>h(e)},{default:f(()=>[p("Add Email")]),_:2},1032,["onClick"])]),n("div",W,[(u(!0),m(w,null,S(l.value[e],I=>(u(),m("div",X,[n("p",null,C(I.email),1),r(M,{class:"delete",onClick:Z=>v(I.id,e),loading:c.value},{default:f(()=>[p("Delete")]),_:2},1032,["onClick","loading"])]))),256))])])),64))])],64))}}),ae=b(Y,[["__scopeId","data-v-2ddefc1a"]]);export{ae as default};
