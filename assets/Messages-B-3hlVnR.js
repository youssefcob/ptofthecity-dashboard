import{d as M,r as m,c as b,a as e,t as p,n as $,o as f,p as I,b as w,_ as C,e as v,H as S,f as B,g as y,F as k,h as x,i as N}from"./index-jZn5q3fF.js";const j=i=>(I("data-v-f994301a"),i=i(),w(),i),H={class:"header"},z=j(()=>e("h1",null,"Messages",-1)),R={class:"pagination-wrapper"},T={class:"btn-search-wrapper"},V=M({__name:"MessagesHeader",props:{page:{type:Number,required:!0}},emits:["statusChanged","paginate"],setup(i,{emit:o}){const n=m("pending"),g=o,d=a=>{n.value=a,g("statusChanged",a!=="pending")},c=a=>{g("paginate",a)};return(a,s)=>(f(),b("div",H,[z,e("div",R,[e("button",{onClick:s[0]||(s[0]=u=>c(-1)),class:"btn"},"Prev Page"),e("div",null,[e("span",null,p(a.$props.page),1)]),e("button",{onClick:s[1]||(s[1]=u=>c(1)),class:"btn"},"Next Page")]),e("div",T,[e("button",{class:$(["btn",{active:n.value==="pending"}]),onClick:s[2]||(s[2]=u=>d("pending"))},"Pending",2),e("button",{class:$(["btn",{active:n.value==="is_read"}]),onClick:s[3]||(s[3]=u=>d("is_read"))},"Read ",2)])]))}}),q=C(V,[["__scopeId","data-v-f994301a"]]),_=i=>(I("data-v-de868d85"),i=i(),w(),i),A={class:"card"},E={class:"info"},F={class:"header"},L={class:"btns-wrapper"},D=_(()=>e("h3",null,"Personal Info:",-1)),G=_(()=>e("strong",null,"Name: ",-1)),O=_(()=>e("strong",null,"Phone: ",-1)),J=_(()=>e("strong",null,"Email: ",-1)),K=_(()=>e("h3",null,"Message Info:",-1)),Q=_(()=>e("strong",null,"Subject: ",-1)),U=_(()=>e("strong",null,"Message: ",-1)),W=M({__name:"MessageCard",props:{message:{type:Object,required:!0}},setup(i){var d;const o=i,n=m((d=o.message)==null?void 0:d.is_read);console.log(o.message);const g=async c=>{var u;if(n.value===c)return;let a;c===1?a="true":a="false";const s=await S.put(`admin/message/${(u=o.message)==null?void 0:u.id}/${a}`,{status:c},{Authorization:`Bearer ${localStorage.getItem("token")}`});if(console.log(s),s.status===401&&(window.location.href="/login"),s.status===200)return n.value=c,s.data;alert(s.data.error)};return(c,a)=>{var s,u,l,t,r,h;return f(),b("div",A,[e("div",E,[e("div",F,[e("h2",null,p((s=o.message)==null?void 0:s.subject),1),e("div",L,[e("button",{class:$([{active:n.value===1},"btn"]),onClick:a[0]||(a[0]=P=>g(1))},"Read",2),e("button",{class:$([{active:n.value===0},"btn"]),onClick:a[1]||(a[1]=P=>g(0))},"Not Read",2)])]),D,e("p",null,[G,v(p((u=o.message)==null?void 0:u.name),1)]),e("p",null,[O,v(p((l=o.message)==null?void 0:l.phone),1)]),e("p",null,[J,v(p((t=o.message)==null?void 0:t.email),1)]),K,e("p",null,[Q,v(" "+p((r=o.message)==null?void 0:r.subject),1)]),e("p",null,[U,v(" "+p((h=o.message)==null?void 0:h.message),1)])])])}}}),X=C(W,[["__scopeId","data-v-de868d85"]]),Y={class:"reservations-container"},Z=M({__name:"Messages",setup(i){const o=m([]),n=m(1),g=m(0),d=async(l="false")=>{const t=await S.get(`admin/message/${l}?page=${n.value}`,{Authorization:`Bearer ${localStorage.getItem("token")}`});if(console.log(t),o.value=t.data.data,g.value=t.data.last_page,t.status===401){window.location.href="/login";return}if(t.status===200)return t.data;console.error(t),alert(t)},c=l=>{n.value==1&&l<0||n.value==g.value&&l>0||(n.value=n.value+l,u())},a=l=>{d(l),n.value=1},u=((l,t=300)=>{let r;return function(...h){clearTimeout(r),r=setTimeout(()=>l.apply(this,h),t)}})(d,300);return B(()=>{d()}),(l,t)=>(f(),b(k,null,[y(q,{page:n.value,onPaginate:t[0]||(t[0]=r=>c(r)),onStatusChanged:t[1]||(t[1]=r=>a(r))},null,8,["page"]),e("div",Y,[(f(!0),b(k,null,x(o.value,r=>(f(),N(X,{class:"reservation",message:r,key:r.id},null,8,["message"]))),128))])],64))}}),se=C(Z,[["__scopeId","data-v-78ec74e7"]]);export{se as default};
